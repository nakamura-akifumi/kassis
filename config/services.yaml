# This file is the entry point to configure your own services.
# Files in the packages/ subdirectory configure your dependencies.

# Put parameters here that don't need to change on each machine where the app is deployed
# https://symfony.com/doc/current/best_practices.html#use-parameters-for-application-configuration
parameters:
    app.amazon_import.book_only: true
    app.amazon_import.use_ndl: true
    app.enabled_display_modes: grid, list, panel, map
    app.default_display_mode: grid
    app.manifestation.identifier_rule: random # uuidv7,numbering,isbn+random(4)
    app.manifestation.identifier_format: '%010d'
    app.manifestation.type1.use_code: true
    app.manifestation.type2.use_code: true
    app.manifestation.type3.use_code: true
    app.manifestation.type4.use_code: true
    app.manifestation.location1.use_code: true
    app.manifestation.location2.use_code: true
    app.manifestation.type1.export_display_name: true
    app.manifestation.type2.export_display_name: true
    app.manifestation.type3.export_display_name: true
    app.manifestation.type4.export_display_name: true
    app.manifestation.search_limits:
        list: 100
        panel: 20
        grid: 1000
        map: 100
    app.member.expiry_days: 1095
    app.checkout.due_days: 14
    app.code.types: ['manifestation_type1', 'manifestation_type2', 'manifestation_type3', 'manifestation_type4', 'manifestation_location1','manifestation_location2','checkout_max_loans', 'checkout_max_renewals', 'checkout_due_date']
    app.member.group1: ['standard', 'vip', 'guest']
    app.member.status: ['active', 'inactive', 'expired']
    app.member.role: ['member','staff','admin']


services:
    # default configuration for services in *this* file
    _defaults:
        autowire: true      # Automatically injects dependencies in your services.
        autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.

    # makes classes in src/ available to be used as services
    # this creates a service per class whose id is the fully-qualified class name
    App\:
        resource: '../src/'
        exclude:
            - '../src/DependencyInjection/'
            - '../src/Entity/'
            - '../src/Kernel.php'

    # add more service definitions when explicit configuration is needed
    # please note that last definitions always *replace* previous ones
    App\Service\NdlSearchService:
        arguments:
            $httpClient: '@http_client'
            $logger: '@logger'
            
    App\Service\AmazonImportService:
        arguments:
            $entityManager: '@doctrine.orm.entity_manager'
            $logger: '@logger'
            $projectDir: '%kernel.project_dir%'
            $useNdl: '%app.amazon_import.use_ndl%'

    App\Service\NumberingService:
        arguments:
            $manifestationIdentifierRule: '%app.manifestation.identifier_rule%'
            $manifestationIdentifierFormat: '%app.manifestation.identifier_format%'

    App\Controller\AmazonImportController:
        arguments:
            $logger: '@logger'
